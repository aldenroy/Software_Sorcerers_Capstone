@model MoviesMadeEasy.DTOs.DashboardDTO

@{
    ViewData["Title"] = "Dashboard";
}


<link rel="stylesheet" href="~/css/dashboard.css" />


<div class="content">
    <h1>Hello, @Model.UserName!</h1>
    
    <h2 class="dashtitles">Recently Viewed</h2>
    <div id="recently-viewed" class="movie-placeholder" role="region" aria-labelledby="recently-viewed-title">
    </div>
    
    <h2 id="subscription-title" class="dashtitles">Current Subscriptions</h2>

    <button id="add-subscription-btn" aria-label="Add a new streaming service"
            onclick="location.href='@Url.Action("AddSubscriptionForm", "User", new { userId = Model.UserId })'">
        Add Streaming Services
    </button>

    <div id="circle-center">
        <div id="subscription-bubble" class="subscription-placeholder" role="region" aria-labelledby="subscription-title">
            @if (Model.HasSubscriptions && Model.SubList != null && Model.SubList.Any())
            {
                <ul class="subscription-list" role="list" aria-live="polite">
                    @foreach (var service in Model.SubList)
                    {
                        <li class="subscription-item" role="listitem">
                            @if (!string.IsNullOrEmpty(service.LogoUrl))
                            {
                                <img src="@service.LogoUrl" alt="@service.Name logo" class="service-logo" />
                            }
                        </li>
                    }
                </ul>
            }
            else
            {
                <div id="subscription-bubble" class="subscription-placeholder" 
                     role="region" aria-labelledby="subscription-title">
                    <div class="overlay-message text-center" aria-live="polite">
                        <p>No subscriptions. <a href="@Url.Action("AddSubscriptionForm", "User", new { userId = Model.UserId })"
                                                aria-label="Add a new subscription">
                            Add
                        </a> subscriptions now?</p>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
